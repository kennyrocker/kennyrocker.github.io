function e(){const e=document.querySelector(".parallax"),t=document.querySelector(".arrow.down"),s=document.querySelector(".arrow.up"),i=document.querySelectorAll(".stop"),r=document.querySelectorAll(".stop .info");this.propsObj={parllaxEleCountNum:10,parallaxNum:.7,transTimeNum:1e3,pointerNum:0,currentPanelId:0,parallaxOffsetNum:50,resizeTimeout:!1,resizeDelta:200,parallaxEleTopArr:[],triggerArr:[],stopHeightNum:void 0,contentHeightNum:void 0,contentWidthNum:void 0,initPointerHeightNum:void 0,initScrollNum:void 0,stopCountNum:void 0,lastPanelEq:void 0,compareTime:void 0},this.setProps=()=>{const e=document.querySelector(".content");this.propsObj.stopHeightNum=i[0].offsetHeight,this.propsObj.contentHeightNum=e.offsetHeight,this.propsObj.contentWidthNum=e.offsetWidth,this.propsObj.initPointerHeightNum=this.propsObj.stopHeightNum/2,this.propsObj.initScrollNum=this.propsObj.stopHeightNum/2,this.propsObj.stopCountNum=i.length,this.propsObj.lastPanelEq=i.length-1},this.drawStage=()=>{const e=document.querySelector(".pointer"),t=document.querySelectorAll(".mark");e.style.height=this.propsObj.initPointerHeightNum-13+"px",t.forEach(e=>{e.style.marginTop=this.propsObj.initPointerHeightNum+"px"})},this.setTriggers=()=>{i.forEach(e=>{const t=e.offsetTop;this.propsObj.triggerArr.push(t)})},this.drawParallax=()=>{this.drawParallaxElements(this.propsObj.parllaxEleCountNum),this.initParallaxEleTopArr();const e=document.querySelector(".element"),t=this.propsObj.contentWidthNum-e.offsetWidth;document.querySelectorAll(".parallax .element").forEach((e,s)=>{e.style.left=this.getRandomInt(0,t)+"px",e.style.top=this.propsObj.parallaxEleTopArr[s]+"px"})},this.drawParallaxElements=t=>{let s="";for(let e=0;e<t;e++)s+="<div id='ele_"+e+"' class='element'></div>";e.innerHTML=s},this.initParallaxEleTopArr=()=>{const e=this.propsObj.contentHeightNum/this.propsObj.parllaxEleCountNum,t=this.propsObj.parallaxOffsetNum;for(let i=0;i<this.propsObj.parllaxEleCountNum;i++){var s=Math.floor(this.getRandomInt(e*i,e*i+t));this.propsObj.parallaxEleTopArr.push(s)}},this.manageParallax=()=>{let t=0-(this.propsObj.pointerNum-this.propsObj.initPointerHeightNum)*this.propsObj.parallaxNum;e.style.top=t+"px"},this.manageControl=()=>{0===this.propsObj.currentPanelId?(s.classList.add("hidden"),t.classList.remove("hidden")):-1===this.propsObj.currentPanelId?(t.classList.add("hidden"),s.classList.remove("hidden")):(t.classList.remove("hidden"),s.classList.remove("hidden"))},this.maintainState=()=>{const e=this.propsObj.pointerNum,t=this.propsObj.triggerArr,s=this.propsObj.lastPanelEq;if(e>0&&e<t[1])this.managePanel(0),this.propsObj.currentPanelId=0;else if(e>t[s])this.managePanel(-1),this.propsObj.currentPanelId=-1;else for(let i=1;i<s;i++)e>t[i]&&e<t[i+1]&&(this.managePanel(i),this.propsObj.currentPanelId=i)},this.managePanel=e=>{this.propsObj.currentPanelId!==e&&this.displayPanel(e)},this.displayPanel=e=>{-1===e&&(e=this.propsObj.lastPanelEq),r.forEach(e=>{e.classList.remove("visible"),e.style.opacity="0",e.style.transition=`opacity ${this.propsObj.transTimeNum}ms ease`});const t=r[e];t.style.display="block",requestAnimationFrame(()=>{t.classList.add("visible"),t.style.opacity=1})},this.initInterval=()=>{const e=this;window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)},function t(){requestAnimFrame(t),e.renderFrame()}()},this.renderFrame=()=>{const e=void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop,t=this.propsObj.initScrollNum+e;this.propsObj.pointerNum=t,this.maintainState(),this.manageParallax(),this.manageControl()},this.getRandomInt=(e,t)=>Math.floor(Math.random()*(t-e+1))+e,this.init=()=>{const e=window.innerHeight+"px";i.forEach(t=>{t.style.height=e}),this.setProps(),this.drawStage(),this.setTriggers(),this.drawParallax(),this.initInterval(),this.addEvents(),this.displayPanel(this.propsObj.currentPanelId)},this.scrollNextStop=()=>{let e;e=-1!==this.propsObj.currentPanelId?this.propsObj.currentPanelId+1:this.propsObj.lastPanelEq+1,e<=this.propsObj.lastPanelEq&&window.scrollTo({top:this.propsObj.triggerArr[e],behavior:"smooth"})},this.scrollPreviousStop=()=>{let e;e=-1===this.propsObj.currentPanelId?this.propsObj.lastPanelEq-1:this.propsObj.currentPanelId-1,e>=0&&window.scrollTo({top:this.propsObj.triggerArr[e],behavior:"smooth"})},this.resizeHandler=()=>{this.propsObj.compareTime=new Date,!1===this.propsObj.resizeTimeout&&(this.propsObj.resizeTimeout=!0,setTimeout(this.resizeEnd,this.propsObj.resizeDelta))},this.resizeEnd=()=>{new Date-this.propsObj.compareTime<this.propsObj.resizeDelta?setTimeout(this.resizeEnd,this.propsObj.resizeDelta):(this.propsObj.resizeTimeout=!1,this.reInit())},this.reInit=()=>{this.propsObj.triggerArr=[];const e=window.innerHeight+"px";i.forEach(t=>{t.style.height=e}),this.setProps(),this.drawStage(),this.setTriggers()},this.addEvents=()=>{this.removeEvents(),t.addEventListener("click",this.scrollNextStop),s.addEventListener("click",this.scrollPreviousStop),window.addEventListener("resize",this.resizeHandler),window.addEventListener("beforeunload",this.boundBeforeUnload)},this.removeEvents=()=>{t.removeEventListener("click",this.scrollNextStop),s.removeEventListener("click",this.scrollPreviousStop),window.removeEventListener("resize",this.resizeHandler),window.removeEventListener("beforeunload",this.boundBeforeUnload)},this.boundBeforeUnload=()=>this.removeEvents(),this.init()}!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}(),document.addEventListener("DOMContentLoaded",()=>{new e});
